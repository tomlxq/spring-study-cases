 # kafka的安装
 
 ## 下载并解压
  
 wget http://mirror.bit.edu.cn/apache/kafka/2.2.0/kafka_2.12-2.2.0.tgz
 scp kafka_2.12-2.2.0.tgz  root@192.168.238.160:/opt/
 tar -zxvf kafka_2.12-2.2.0.tgz
 
 ## 修改配置文件
 
 vi kafka_2.12-2.2.0/config/server.properties 
 broker.id=0
 listeners=PLAINTEXT://192.168.238.150:9092
 zookeeper.connect=192.168.238.150:2181,192.168.238.155:2181,192.168.238.160:2181
 
 ## 启动并查看zookeeper状态
 
 sh /opt/zookeeper-3.4.10/bin/zkServer.sh start
 sh /opt/zookeeper-3.4.10/bin/zkServer.sh status
 tailf -100 /opt/zookeeper-3.4.10/bin/zookeeper.out 
 
 ## 启动kafka并查看日志
 
 sh /opt/kafka_2.12-2.2.0/bin/kafka-server-start.sh -daemon /opt/kafka_2.12-2.2.0/config/server.properties 
 tail -100f /opt/kafka_2.12-2.2.0/logs/kafkaServer.out 
 
 ## 查看kafka在zookeepr注册的节点信息
 
 cluster, controller_epoch, controller, brokers, zookeeper, admin, isr_change_notification, consumers, log_dir_event_notification, latest_producer_id_block, config
 
 ### 查看kafka的leader
 
 sh /opt/zookeeper-3.4.10/bin/zkCli.sh 
 get /controller 
 {"version":1,"brokerid":1,"timestamp":"1555230730096"}
 cZxid = 0xa0000003e
 ctime = Sun Apr 14 04:32:10 EDT 2019
 mZxid = 0xa0000003e
 mtime = Sun Apr 14 04:32:10 EDT 2019
 pZxid = 0xa0000003e
 cversion = 0
 dataVersion = 0
 aclVersion = 0
 ephemeralOwner = 0x26a1af48ac30001
 dataLength = 54
 numChildren = 0
 
 ### 查看当前的集群节点
 [zk: localhost:2181(CONNECTED) 3] ls /brokers/ids 
 [0, 1, 2]
 [zk: localhost:2181(CONNECTED) 4] get /brokers/ids/1
 {"listener_security_protocol_map":{"PLAINTEXT":"PLAINTEXT"},"endpoints":["PLAINTEXT://192.168.238.155:9092"],"jmx_port":-1,"host":"192.168.238.155","timestamp":"1555230728221","port":9092,"version":4}
 cZxid = 0xa0000003b
 ctime = Sun Apr 14 04:32:08 EDT 2019
 mZxid = 0xa0000003b
 mtime = Sun Apr 14 04:32:08 EDT 2019
 pZxid = 0xa0000003b
 cversion = 0
 dataVersion = 1
 aclVersion = 0
 ephemeralOwner = 0x26a1af48ac30001
 dataLength = 200
 numChildren = 0
 
 ## 常用操作
 http://kafka.apache.org/quickstart
 
 bin/kafka-topics.sh --create --bootstrap-server 192.168.238.150:9092 --replication-factor 1 --partitions 1 --topic MyTopic
 bin/kafka-topics.sh --list --bootstrap-server 192.168.238.150:9092
 zookeeper也可以看到
 ls /brokers/topics
 
 bin/kafka-console-producer.sh --broker-list 192.168.238.150:9092 --topic MyTopic
 bin/kafka-console-consumer.sh --bootstrap-server 192.168.238.150:9092 --topic MyTopic --from-beginning
 
 
 secureCRT shift+delete删当前字符